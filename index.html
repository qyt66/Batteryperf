<!DOCTYPE html>
<html>
<head>
  <title>Battery Drain Test - Heavy Load</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      background: black;
      color: white;
      font-family: sans-serif;
      text-align: center;
    }
    canvas {
      display: block;
    }
    h1, p {
      margin: 1rem 0 0;
      z-index: 10;
      position: relative;
    }
  </style>
</head>
<body>
  <h1>‚ö†Ô∏è Battery Load Test Running...</h1>
  <p>üëÜ Tap anywhere to keep screen awake</p>
  <canvas id="canvas"></canvas>

  <script>
    // Resize canvas
    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    function resizeCanvas() {
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    // GPU Load
    function renderLoop() {
      for (let i = 0; i < 100; i++) {
        ctx.fillStyle = `hsl(${Math.random() * 360}, 100%, 50%)`;
        ctx.fillRect(Math.random() * canvas.width, Math.random() * canvas.height, 20, 20);
      }
      requestAnimationFrame(renderLoop);
    }
    renderLoop();

    // CPU Load
    function cpuBurner() {
      const start = performance.now();
      while (performance.now() - start < 100) {
        Math.sqrt(Math.random() * 1e6);
      }
      setTimeout(cpuBurner, 0);
    }
    cpuBurner();

    // GPS Activation
    if (navigator.geolocation) {
      setInterval(() => {
        navigator.geolocation.getCurrentPosition(
          pos => console.log(`GPS: ${pos.coords.latitude}, ${pos.coords.longitude}`),
          err => console.warn("GPS error:", err)
        );
      }, 1000);
    }

    // Orientation Sensor
    window.addEventListener('deviceorientation', event => {
      console.log(`Orientation: alpha=${event.alpha}, beta=${event.beta}, gamma=${event.gamma}`);
    });

    // Wake Lock via Hidden Looping Video (iOS-Compatible)
    const video = document.createElement('video');
    video.style.position = 'absolute';
    video.style.width = '1px';
    video.style.height = '1px';
    video.style.opacity = '0';
    video.muted = true;
    video.loop = true;
    video.playsInline = true;
    video.src = "data:video/mp4;base64,AAAAHGZ0eXBtcDQyAAAAAG1wNDFtcDQyaXNvbTEybXA0MnYxAAAAAW1vb3YAAABsbXZoZAAAAAB8JgABfCYAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAABxpb2RzAAAAAAEAAAAMAAAD6wABAAAAAAO6AAAC3///8AAAAAAGnZHRyYWsAAABcdGtoZAAAAAB8JgABfCYAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAABAAAAAAACc3RibAAAACBzdHNkAAAAAAAAAAEAAQABAAAABAAAAAABAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAABAAAADGF2YzEAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";

    document.body.appendChild(video);

    // Require user interaction to start
    const tryPlay = () => {
      video.play().then(() => {
        console.log("Wake Lock video playing");
      }).catch(err => {
        console.warn("Wake Lock video blocked:", err);
      });
    };

    document.addEventListener('click', tryPlay);
    document.addEventListener('touchstart', tryPlay);
  </script>
</body>
</html>
